<!DOCTYPE html>
<html>
<head>
	<title>websocket</title>
	<style type="text/css">
	.shit{
				border:2px solid #444;
				height: 10px;
				width: 10px;
				background: yellow;
				border-radius: 10px;
				position: absolute;
				left: 500px;
				top:500px;
	}
	#body{
		width: 100%;
		height:10000px;
	}
																					}
</style>
	</head>
	<body id="body">
	<div id="obj" class="shit"></div>
	<script type="text/javascript">
var body=document.getElementById("body")
	ws=new WebSocket("ws://192.168.1.128:81/mv")
	ws.onopen=function(event){
		console.log(ws)
		ws.send("hello server");
	}
	var body=document.getElementById('body');
	var bod=document.getElementById('obj');
     function a(x,y){
	          	var a=document.getElementById("obj")
				         a.style.left=a.offsetLeft+x+"px"
					          a.style.top=a.offsetTop+ y+"px"
				      }
ws.onmessage=function(event){
	d=JSON.parse(event.data)
	console.log(d)
		a(d.x,d.y)
}
body.onclick=function(event){
			          y=event.y-bod.offsetTop;
				           x=event.x-bod.offsetLeft;
				           console.log(x,y)
				           r=Math.sqrt(x*x+y*y);
				           x=(5/r)*x
				           y=(5/r)*y
				           x=Math.round(x)
				           y=Math.round(y)
				           js='{"x":'+x+',"y":'+y+'}'
				           console.log(js)
		ws.send(js);
		a(x,y)
}
	</script>
	</body>
	</html>
